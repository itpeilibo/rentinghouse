"use strict";(self["webpackChunkhaoke_dome"]=self["webpackChunkhaoke_dome"]||[]).push([[674],{4674:function(t,a,e){e.r(a),e.d(a,{default:function(){return f}});var s=function(){var t=this,a=t._self._c;return a("div",[a("van-nav-bar",{attrs:{title:"地图","left-arrow":""},on:{"click-left":t.onClickLeft}}),a("div",[0===t.num?a("baidu-map",{staticClass:"map",attrs:{center:t.name,anchor:"BMAP_ANCHOR_TOP_RIGHT",dragging:!1,"double-click-zoom":!1,zoom:11}},[t._l(t.list,(function(e,s){return a("div",{key:s},[a("my-overlay",{attrs:{position:{lng:e.coord.longitude,lat:e.coord.latitude},text:`${e.label}  ${e.count}套`,item:e},on:{aaasss:t.aaasss}},[t._v(">")])],1)})),a("bm-navigation",{attrs:{type:"BMAP_NAVIGATION_CONTROL_LARGE",anchor:"BMAP_ANCHOR_TOP_LEFT"}})],2):t._e(),0!==t.num?a("baidu-map",{staticClass:"map",attrs:{center:t.obj,anchor:"BMAP_ANCHOR_TOP_RIGHT",dragging:!1,"double-click-zoom":!1,zoom:1===t.num?14:17}},[t._l(t.sonlist,(function(e,s){return a("div",{key:s},[a("my-overlay",{attrs:{position:{lng:e.coord.longitude,lat:e.coord.latitude},text:`${e.label}  ${e.count}套`,item:e,num:t.num},on:{aaasss:t.aaasss,show:function(a){t.show=!0},ffangzi:t.ffangzi}},[t._v(">")])],1)})),a("bm-navigation",{attrs:{type:"BMAP_NAVIGATION_CONTROL_LARGE",anchor:"BMAP_ANCHOR_TOP_LEFT"}})],2):t._e()],1),a("van-popup",{style:{height:"45%"},attrs:{position:"bottom"},model:{value:t.show,callback:function(a){t.show=a},expression:"show"}},[a("van-cell",{attrs:{title:"房屋列表",center:""},scopedSlots:t._u([{key:"right-icon",fn:function(){return[a("div",{on:{click:function(a){return t.$router.push("/layout/gethome")}}},[t._v("更多房源")])]},proxy:!0}])}),a("div",{staticClass:"qwea"},t._l(t.fangzi,(function(e,s){return a("van-card",{key:s,attrs:{price:e.price,desc:e.desc,title:e.title,thumb:"http://liufusong.top:8080"+e.houseImg},scopedSlots:t._u([{key:"tags",fn:function(){return t._l(e.tags,(function(e){return a("van-tag",{key:e,attrs:{plain:"",type:"danger"}},[t._v(t._s(e))])}))},proxy:!0}],null,!0)})})),1)],1)],1)},i=[],o=e(6326),n=function(){var t=this,a=t._self._c;return a("bm-overlay",{ref:"customOverlay",class:{sample:!0},attrs:{pane:"labelPane"},on:{draw:t.draw}},[a("div",{domProps:{textContent:t._s(t.text)},on:{click:t.handleClick}})])},r=[],l={props:["text","position","item","num"],data(){return{obj:{arr:[],coord:{}}}},watch:{position:{handler(){this.$refs.customOverlay.reload()},deep:!0}},methods:{async handleClick(){if(2!==this.num)console.log(this.item.coord),this.areamap();else{this.$emit("show");const t=await(0,o.nh)({cityId:this.$store.state.chengshi.id,area:this.item.value});this.$emit("ffangzi",t.data.body.list)}},async areamap(){const t=await(0,o.ID)(this.item.value);this.obj.arr=t.data.body,this.obj.coord=this.item.coord,this.$store.commit("getsonchengshi",this.obj),this.$emit("aaasss",this.item.coord,t.data.body)},draw({el:t,BMap:a,map:e}){const{lng:s,lat:i}=this.position,o=e.pointToOverlayPixel(new a.Point(s,i));t.style.left=o.x-60+"px",t.style.top=o.y-20+"px"}}},c=l,h=e(1001),u=(0,h.Z)(c,n,r,!1,null,null,null),d=u.exports,m={data(){return{fangzi:[],show:!1,num:0,id:"",name:"",list:[],sonlist:[],obj:{lng:"",lat:""},circlePath:{radius:500}}},created(){this.id=this.$store.state.chengshi.id,this.name=this.$store.state.chengshi.name,this.areamap()},methods:{ffangzi(t){this.fangzi=t},aaasss(t,a){console.log("11111"),this.obj.lat=t.latitude,this.obj.lng=t.longitude,this.sonlist=a,2===this.num?(this.num=2,this.show=!0):this.num++},async areamap(){const t=await(0,o.ID)(this.id);console.log(t),this.list=t.data.body},updateCirclePath(t){this.circlePath.center=t.target.getCenter(),this.circlePath.radius=t.target.getRadius()},onClickLeft(){this.$router.back()}},components:{MyOverlay:d}},p=m,g=(0,h.Z)(p,s,i,!1,null,"b17f2774",null),f=g.exports}}]);
//# sourceMappingURL=674.51888ae1.js.map